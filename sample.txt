public WebElement waitForFirstVisibleElement(By locator) {
    return wait.until(driver -> {
        List<WebElement> elements = driver.findElements(locator);
        for (WebElement element : elements) {
            if (element.isDisplayed()) {
                return element;
            }
        }
        return null; // keep waiting
    });
}
