public class ExtentManager {

    private static ExtentReports extent;
    private static String reportDir;
    private static ThreadLocal<ExtentTest> test = new ThreadLocal<>();

    public static ExtentReports getInstance() {

        if (extent == null) {
            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
            reportDir = System.getProperty("user.dir") + "/reports/";
            new File(reportDir).mkdirs();

            String reportPath = reportDir + "SparkReport_" + timeStamp + ".html";

            ExtentSparkReporter spark = new ExtentSparkReporter(reportPath);

            // ðŸ”¥ Enable Pass/Fail filtering UI
            spark.config().setTimelineEnabled(true);
            spark.config().setReportName("Automation Report");
            spark.config().setDocumentTitle("Execution Report");

            // ðŸ”¥ Load external config (optional but recommended)
            spark.loadXMLConfig(System.getProperty("user.dir") + "/extent-config.xml");

            extent = new ExtentReports();
            extent.attachReporter(spark);

            // System info
            extent.setSystemInfo("OS", System.getProperty("os.name"));
            extent.setSystemInfo("Java Version", System.getProperty("java.version"));
            extent.setSystemInfo("User", System.getProperty("user.name"));
        }

        return extent;
    }

    public static ExtentTest getTest() {
        return test.get();
    }

    public static void setTest(ExtentTest extentTest) {
        test.set(extentTest);
    }
}





<extent>
    <configuration>
        <theme>standard</theme>
        <encoding>UTF-8</encoding>

        <!-- Show Pass/Fail filters -->
        <protocol>HTTPS</protocol>

        <timelineEnabled>true</timelineEnabled>

        <!-- Enable Dashboard -->
        <enableDashboard>true</enableDashboard>

        <!-- Show category, device, author -->
        <enableCategoryView>true</enableCategoryView>
        <enableAuthorView>true</enableAuthorView>
        <enableDeviceView>true</enableDeviceView>

        <reportName>Cucumber Test Execution Report</reportName>
        <documentTitle>Automation Execution</documentTitle>
    </configuration>
</extent>
